## Motivation

For stateful distributed computations, the **snapshot** is a common method to recover from failure. However, currently most snapshot are generated by synchronous snapshot, which has at least two drawbacks:

1. Affect system normal execution
2. Storage state more than it needed.

Here, This paper introduces **ABS**, asynchronous barrier snapshotting do snapshot while avoiding above defects.

## ABS

For a snapshot algorithm, we need to prove the **termination** and **feasibility** to show the validation of the algorithms. 
Termination means that the snapshotting processing can not be indefinite, and feasibility means the snapshot must have all info necessary to recover from failure.

For an asynchronous barrier snapshotting algorithms, this paper split it into two types:

1. no cyclic dataflows

   For no cyclic dataflows, the ABS algorithm is intuitional. It will terminate since all barriers will forward until it receive the ending, and the feasibility is also straightforward.

   All data before the barrier will be recorded into the snapshot, and all data after the barrier will be blocked and wait for computed. 

2. cyclic dataflows.

   For cyclic dataflows, the problems may occur in both termination and feasibility. The cyclic may lead to indefinite barrier forward process and cyclic data loss if we still use the ABS before.

   However, we can do a little improvement to origin ABS algorithm.

   When doing DFS to the cyclic graph, we can get a no cyclic graph + backward edge. When doing ABS, for the node owning a cyclic graph, it should buffer the data from backward edges and also consider it as state, namely part of the snapshot, until it receive the barrier from backward edge.

## Failure Recovery

Basically speaking, recovery from a snapshot can be a global task and local tasks.

For a global task, it is natural to do it by stop and reconfigure, but for a local recovery, it may be more difficult to guarantee the exactly-once.

For a local recovery, all nodes in the downstream should not do recovery to guarantee exactly-once.

## Implementation

Totally speaking, ABS is much better than synchronous snapshot algorithms and the performance roughly have no relation with cluster size.





